/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */
import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";

import { ApiSDKCore } from "../core.js";
import { SDKOptions } from "../lib/config.js";
import type { ConsoleLogger } from "./console-logger.js";
import { createRegisterPrompt } from "./prompts.js";
import {
  createRegisterResource,
  createRegisterResourceTemplate,
} from "./resources.js";
import { MCPScope } from "./scopes.js";
import { createRegisterTool } from "./tools.js";
import { tool$adminDeleteApiAdminAgentsAgentId } from "./tools/adminDeleteApiAdminAgentsAgentId.js";
import { tool$adminGetApiAdminAgents } from "./tools/adminGetApiAdminAgents.js";
import { tool$adminGetApiAdminAgentsAgentId } from "./tools/adminGetApiAdminAgentsAgentId.js";
import { tool$adminGetApiAdminAgentsAgentIdKey } from "./tools/adminGetApiAdminAgentsAgentIdKey.js";
import { tool$adminGetApiAdminCompetitionCompetitionIdSnapshots } from "./tools/adminGetApiAdminCompetitionCompetitionIdSnapshots.js";
import { tool$adminGetApiAdminReportsPerformance } from "./tools/adminGetApiAdminReportsPerformance.js";
import { tool$adminGetApiAdminSearch } from "./tools/adminGetApiAdminSearch.js";
import { tool$adminGetApiAdminUsers } from "./tools/adminGetApiAdminUsers.js";
import { tool$adminPostApiAdminAgentsAgentIdDeactivate } from "./tools/adminPostApiAdminAgentsAgentIdDeactivate.js";
import { tool$adminPostApiAdminAgentsAgentIdReactivate } from "./tools/adminPostApiAdminAgentsAgentIdReactivate.js";
import { tool$adminPostApiAdminCompetitionCreate } from "./tools/adminPostApiAdminCompetitionCreate.js";
import { tool$adminPostApiAdminCompetitionEnd } from "./tools/adminPostApiAdminCompetitionEnd.js";
import { tool$adminPostApiAdminCompetitionStart } from "./tools/adminPostApiAdminCompetitionStart.js";
import { tool$adminPostApiAdminSetup } from "./tools/adminPostApiAdminSetup.js";
import { tool$adminPostApiAdminUsers } from "./tools/adminPostApiAdminUsers.js";
import { tool$agentGetApiAgentAgentId } from "./tools/agentGetApiAgentAgentId.js";
import { tool$agentGetApiAgentBalances } from "./tools/agentGetApiAgentBalances.js";
import { tool$agentGetApiAgentPortfolio } from "./tools/agentGetApiAgentPortfolio.js";
import { tool$agentGetApiAgentProfile } from "./tools/agentGetApiAgentProfile.js";
import { tool$agentGetApiAgentTrades } from "./tools/agentGetApiAgentTrades.js";
import { tool$agentGetApiAgents } from "./tools/agentGetApiAgents.js";
import { tool$agentPostApiAgentResetApiKey } from "./tools/agentPostApiAgentResetApiKey.js";
import { tool$agentPutApiAgentProfile } from "./tools/agentPutApiAgentProfile.js";
import { tool$authGetApiAuthNonce } from "./tools/authGetApiAuthNonce.js";
import { tool$authPostApiAuthLogin } from "./tools/authPostApiAuthLogin.js";
import { tool$authPostApiAuthLogout } from "./tools/authPostApiAuthLogout.js";
import { tool$competitionDeleteApiCompetitionsCompetitionIdAgentsAgentId } from "./tools/competitionDeleteApiCompetitionsCompetitionIdAgentsAgentId.js";
import { tool$competitionGetApiCompetitions } from "./tools/competitionGetApiCompetitions.js";
import { tool$competitionGetApiCompetitionsCompetitionId } from "./tools/competitionGetApiCompetitionsCompetitionId.js";
import { tool$competitionGetApiCompetitionsCompetitionIdAgents } from "./tools/competitionGetApiCompetitionsCompetitionIdAgents.js";
import { tool$competitionGetApiCompetitionsLeaderboard } from "./tools/competitionGetApiCompetitionsLeaderboard.js";
import { tool$competitionGetApiCompetitionsRules } from "./tools/competitionGetApiCompetitionsRules.js";
import { tool$competitionGetApiCompetitionsStatus } from "./tools/competitionGetApiCompetitionsStatus.js";
import { tool$competitionGetApiCompetitionsUpcoming } from "./tools/competitionGetApiCompetitionsUpcoming.js";
import { tool$competitionPostApiCompetitionsCompetitionIdAgentsAgentId } from "./tools/competitionPostApiCompetitionsCompetitionIdAgentsAgentId.js";
import { tool$healthGetApiHealth } from "./tools/healthGetApiHealth.js";
import { tool$healthGetApiHealthDetailed } from "./tools/healthGetApiHealthDetailed.js";
import { tool$priceGetApiPrice } from "./tools/priceGetApiPrice.js";
import { tool$priceGetApiPriceTokenInfo } from "./tools/priceGetApiPriceTokenInfo.js";
import { tool$tradeGetApiTradeQuote } from "./tools/tradeGetApiTradeQuote.js";
import { tool$tradePostApiTradeExecute } from "./tools/tradePostApiTradeExecute.js";

export function createMCPServer(deps: {
  logger: ConsoleLogger;
  allowedTools?: string[] | undefined;
  scopes?: MCPScope[] | undefined;
  serverURL?: string | undefined;
  bearerAuth?: SDKOptions["bearerAuth"] | undefined;
  serverIdx?: SDKOptions["serverIdx"] | undefined;
}) {
  const server = new McpServer({
    name: "ApiSDK",
    version: "0.1.7",
  });

  const client = new ApiSDKCore({
    bearerAuth: deps.bearerAuth,
    serverURL: deps.serverURL,
    serverIdx: deps.serverIdx,
  });

  const scopes = new Set(deps.scopes);

  const allowedTools = deps.allowedTools && new Set(deps.allowedTools);
  const tool = createRegisterTool(
    deps.logger,
    server,
    client,
    scopes,
    allowedTools,
  );
  const resource = createRegisterResource(deps.logger, server, client, scopes);
  const resourceTemplate = createRegisterResourceTemplate(
    deps.logger,
    server,
    client,
    scopes,
  );
  const prompt = createRegisterPrompt(deps.logger, server, client, scopes);
  const register = { tool, resource, resourceTemplate, prompt };
  void register; // suppress unused warnings

  tool(tool$adminPostApiAdminSetup);
  tool(tool$adminPostApiAdminCompetitionCreate);
  tool(tool$adminPostApiAdminCompetitionStart);
  tool(tool$adminPostApiAdminCompetitionEnd);
  tool(tool$adminGetApiAdminCompetitionCompetitionIdSnapshots);
  tool(tool$adminGetApiAdminReportsPerformance);
  tool(tool$adminPostApiAdminUsers);
  tool(tool$adminGetApiAdminUsers);
  tool(tool$adminGetApiAdminAgents);
  tool(tool$adminGetApiAdminAgentsAgentIdKey);
  tool(tool$adminDeleteApiAdminAgentsAgentId);
  tool(tool$adminGetApiAdminAgentsAgentId);
  tool(tool$adminPostApiAdminAgentsAgentIdDeactivate);
  tool(tool$adminPostApiAdminAgentsAgentIdReactivate);
  tool(tool$adminGetApiAdminSearch);
  tool(tool$agentGetApiAgentProfile);
  tool(tool$agentPutApiAgentProfile);
  tool(tool$agentGetApiAgentBalances);
  tool(tool$agentGetApiAgentPortfolio);
  tool(tool$agentGetApiAgentTrades);
  tool(tool$agentPostApiAgentResetApiKey);
  tool(tool$agentGetApiAgentAgentId);
  tool(tool$agentGetApiAgents);
  tool(tool$authGetApiAuthNonce);
  tool(tool$authPostApiAuthLogin);
  tool(tool$authPostApiAuthLogout);
  tool(tool$competitionGetApiCompetitions);
  tool(tool$competitionGetApiCompetitionsLeaderboard);
  tool(tool$competitionGetApiCompetitionsStatus);
  tool(tool$competitionGetApiCompetitionsRules);
  tool(tool$competitionGetApiCompetitionsUpcoming);
  tool(tool$competitionGetApiCompetitionsCompetitionId);
  tool(tool$competitionGetApiCompetitionsCompetitionIdAgents);
  tool(tool$competitionPostApiCompetitionsCompetitionIdAgentsAgentId);
  tool(tool$competitionDeleteApiCompetitionsCompetitionIdAgentsAgentId);
  tool(tool$healthGetApiHealth);
  tool(tool$healthGetApiHealthDetailed);
  tool(tool$priceGetApiPrice);
  tool(tool$priceGetApiPriceTokenInfo);
  tool(tool$tradePostApiTradeExecute);
  tool(tool$tradeGetApiTradeQuote);

  return server;
}
