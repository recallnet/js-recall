export * from '../models/ApiAccountBalancesGet200Response';
export * from '../models/ApiAccountBalancesGet200ResponseBalancesInner';
export * from '../models/ApiAccountPortfolioGet200Response';
export * from '../models/ApiAccountPortfolioGet200ResponseTokensInner';
export * from '../models/ApiAccountProfileGet200Response';
export * from '../models/ApiAccountProfileGet200ResponseTeam';
export * from '../models/ApiAccountProfileGet200ResponseTeamMetadata';
export * from '../models/ApiAccountProfileGet200ResponseTeamMetadataRef';
export * from '../models/ApiAccountProfileGet200ResponseTeamMetadataSocial';
export * from '../models/ApiAccountProfilePut200Response';
export * from '../models/ApiAccountProfilePut200ResponseTeam';
export * from '../models/ApiAccountProfilePutRequest';
export * from '../models/ApiAccountProfilePutRequestMetadata';
export * from '../models/ApiAccountResetApiKeyPost200Response';
export * from '../models/ApiAccountTradesGet200Response';
export * from '../models/ApiAccountTradesGet200ResponseTradesInner';
export * from '../models/ApiAdminCompetitionCompetitionIdSnapshotsGet200Response';
export * from '../models/ApiAdminCompetitionCompetitionIdSnapshotsGet200ResponseSnapshotsInner';
export * from '../models/ApiAdminCompetitionCreatePost201Response';
export * from '../models/ApiAdminCompetitionCreatePost201ResponseCompetition';
export * from '../models/ApiAdminCompetitionCreatePostRequest';
export * from '../models/ApiAdminCompetitionEndPost200Response';
export * from '../models/ApiAdminCompetitionEndPost200ResponseCompetition';
export * from '../models/ApiAdminCompetitionEndPost200ResponseLeaderboardInner';
export * from '../models/ApiAdminCompetitionEndPostRequest';
export * from '../models/ApiAdminCompetitionStartPost200Response';
export * from '../models/ApiAdminCompetitionStartPost200ResponseCompetition';
export * from '../models/ApiAdminCompetitionStartPostRequest';
export * from '../models/ApiAdminReportsPerformanceGet200Response';
export * from '../models/ApiAdminReportsPerformanceGet200ResponseCompetition';
export * from '../models/ApiAdminReportsPerformanceGet200ResponseLeaderboardInner';
export * from '../models/ApiAdminSetupPost201Response';
export * from '../models/ApiAdminSetupPost201ResponseAdmin';
export * from '../models/ApiAdminSetupPostRequest';
export * from '../models/ApiAdminTeamsGet200Response';
export * from '../models/ApiAdminTeamsGet200ResponseTeamsInner';
export * from '../models/ApiAdminTeamsRegisterPost201Response';
export * from '../models/ApiAdminTeamsRegisterPost201ResponseTeam';
export * from '../models/ApiAdminTeamsRegisterPostRequest';
export * from '../models/ApiAdminTeamsTeamIdDeactivatePost200Response';
export * from '../models/ApiAdminTeamsTeamIdDeactivatePost200ResponseTeam';
export * from '../models/ApiAdminTeamsTeamIdDeactivatePostRequest';
export * from '../models/ApiAdminTeamsTeamIdDelete200Response';
export * from '../models/ApiAdminTeamsTeamIdKeyGet200Response';
export * from '../models/ApiAdminTeamsTeamIdKeyGet200ResponseTeam';
export * from '../models/ApiAdminTeamsTeamIdReactivatePost200Response';
export * from '../models/ApiAdminTeamsTeamIdReactivatePost200ResponseTeam';
export * from '../models/ApiCompetitionLeaderboardGet200Response';
export * from '../models/ApiCompetitionLeaderboardGet200ResponseCompetition';
export * from '../models/ApiCompetitionLeaderboardGet200ResponseLeaderboardInner';
export * from '../models/ApiCompetitionRulesGet200Response';
export * from '../models/ApiCompetitionRulesGet200ResponseRules';
export * from '../models/ApiCompetitionRulesGet200ResponseRulesAvailableChains';
export * from '../models/ApiCompetitionRulesGet200ResponseRulesPortfolioSnapshots';
export * from '../models/ApiCompetitionStatusGet200Response';
export * from '../models/ApiCompetitionStatusGet200ResponseCompetition';
export * from '../models/ApiCompetitionUpcomingGet200Response';
export * from '../models/ApiCompetitionUpcomingGet200ResponseCompetitionsInner';
export * from '../models/ApiHealthDetailedGet200Response';
export * from '../models/ApiHealthDetailedGet200ResponseServices';
export * from '../models/ApiHealthGet200Response';
export * from '../models/ApiPriceGet200Response';
export * from '../models/ApiPriceTokenInfoGet200Response';
export * from '../models/ApiPublicTeamsRegisterPost201Response';
export * from '../models/ApiPublicTeamsRegisterPost201ResponseTeam';
export * from '../models/ApiPublicTeamsRegisterPostRequest';
export * from '../models/ApiTradeExecutePost200Response';
export * from '../models/ApiTradeExecutePostRequest';
export * from '../models/ApiTradeQuoteGet200Response';
export * from '../models/ApiTradeQuoteGet200ResponseChains';
export * from '../models/ApiTradeQuoteGet200ResponsePrices';
export * from '../models/ModelError';
export * from '../models/TokenBalance';
export * from '../models/Trade';

import { ApiAccountBalancesGet200Response } from '../models/ApiAccountBalancesGet200Response';
import { ApiAccountBalancesGet200ResponseBalancesInner  , ApiAccountBalancesGet200ResponseBalancesInnerChainEnum    } from '../models/ApiAccountBalancesGet200ResponseBalancesInner';
import { ApiAccountPortfolioGet200Response     , ApiAccountPortfolioGet200ResponseSourceEnum   } from '../models/ApiAccountPortfolioGet200Response';
import { ApiAccountPortfolioGet200ResponseTokensInner    , ApiAccountPortfolioGet200ResponseTokensInnerChainEnum    } from '../models/ApiAccountPortfolioGet200ResponseTokensInner';
import { ApiAccountProfileGet200Response } from '../models/ApiAccountProfileGet200Response';
import { ApiAccountProfileGet200ResponseTeam } from '../models/ApiAccountProfileGet200ResponseTeam';
import { ApiAccountProfileGet200ResponseTeamMetadata } from '../models/ApiAccountProfileGet200ResponseTeamMetadata';
import { ApiAccountProfileGet200ResponseTeamMetadataRef } from '../models/ApiAccountProfileGet200ResponseTeamMetadataRef';
import { ApiAccountProfileGet200ResponseTeamMetadataSocial } from '../models/ApiAccountProfileGet200ResponseTeamMetadataSocial';
import { ApiAccountProfilePut200Response } from '../models/ApiAccountProfilePut200Response';
import { ApiAccountProfilePut200ResponseTeam } from '../models/ApiAccountProfilePut200ResponseTeam';
import { ApiAccountProfilePutRequest } from '../models/ApiAccountProfilePutRequest';
import { ApiAccountProfilePutRequestMetadata } from '../models/ApiAccountProfilePutRequestMetadata';
import { ApiAccountResetApiKeyPost200Response } from '../models/ApiAccountResetApiKeyPost200Response';
import { ApiAccountTradesGet200Response } from '../models/ApiAccountTradesGet200Response';
import { ApiAccountTradesGet200ResponseTradesInner } from '../models/ApiAccountTradesGet200ResponseTradesInner';
import { ApiAdminCompetitionCompetitionIdSnapshotsGet200Response } from '../models/ApiAdminCompetitionCompetitionIdSnapshotsGet200Response';
import { ApiAdminCompetitionCompetitionIdSnapshotsGet200ResponseSnapshotsInner } from '../models/ApiAdminCompetitionCompetitionIdSnapshotsGet200ResponseSnapshotsInner';
import { ApiAdminCompetitionCreatePost201Response } from '../models/ApiAdminCompetitionCreatePost201Response';
import { ApiAdminCompetitionCreatePost201ResponseCompetition   , ApiAdminCompetitionCreatePost201ResponseCompetitionStatusEnum     } from '../models/ApiAdminCompetitionCreatePost201ResponseCompetition';
import { ApiAdminCompetitionCreatePostRequest } from '../models/ApiAdminCompetitionCreatePostRequest';
import { ApiAdminCompetitionEndPost200Response } from '../models/ApiAdminCompetitionEndPost200Response';
import { ApiAdminCompetitionEndPost200ResponseCompetition     , ApiAdminCompetitionEndPost200ResponseCompetitionStatusEnum    } from '../models/ApiAdminCompetitionEndPost200ResponseCompetition';
import { ApiAdminCompetitionEndPost200ResponseLeaderboardInner } from '../models/ApiAdminCompetitionEndPost200ResponseLeaderboardInner';
import { ApiAdminCompetitionEndPostRequest } from '../models/ApiAdminCompetitionEndPostRequest';
import { ApiAdminCompetitionStartPost200Response } from '../models/ApiAdminCompetitionStartPost200Response';
import { ApiAdminCompetitionStartPost200ResponseCompetition     , ApiAdminCompetitionStartPost200ResponseCompetitionStatusEnum     } from '../models/ApiAdminCompetitionStartPost200ResponseCompetition';
import { ApiAdminCompetitionStartPostRequest } from '../models/ApiAdminCompetitionStartPostRequest';
import { ApiAdminReportsPerformanceGet200Response } from '../models/ApiAdminReportsPerformanceGet200Response';
import { ApiAdminReportsPerformanceGet200ResponseCompetition     , ApiAdminReportsPerformanceGet200ResponseCompetitionStatusEnum    } from '../models/ApiAdminReportsPerformanceGet200ResponseCompetition';
import { ApiAdminReportsPerformanceGet200ResponseLeaderboardInner } from '../models/ApiAdminReportsPerformanceGet200ResponseLeaderboardInner';
import { ApiAdminSetupPost201Response } from '../models/ApiAdminSetupPost201Response';
import { ApiAdminSetupPost201ResponseAdmin } from '../models/ApiAdminSetupPost201ResponseAdmin';
import { ApiAdminSetupPostRequest } from '../models/ApiAdminSetupPostRequest';
import { ApiAdminTeamsGet200Response } from '../models/ApiAdminTeamsGet200Response';
import { ApiAdminTeamsGet200ResponseTeamsInner } from '../models/ApiAdminTeamsGet200ResponseTeamsInner';
import { ApiAdminTeamsRegisterPost201Response } from '../models/ApiAdminTeamsRegisterPost201Response';
import { ApiAdminTeamsRegisterPost201ResponseTeam } from '../models/ApiAdminTeamsRegisterPost201ResponseTeam';
import { ApiAdminTeamsRegisterPostRequest } from '../models/ApiAdminTeamsRegisterPostRequest';
import { ApiAdminTeamsTeamIdDeactivatePost200Response } from '../models/ApiAdminTeamsTeamIdDeactivatePost200Response';
import { ApiAdminTeamsTeamIdDeactivatePost200ResponseTeam } from '../models/ApiAdminTeamsTeamIdDeactivatePost200ResponseTeam';
import { ApiAdminTeamsTeamIdDeactivatePostRequest } from '../models/ApiAdminTeamsTeamIdDeactivatePostRequest';
import { ApiAdminTeamsTeamIdDelete200Response } from '../models/ApiAdminTeamsTeamIdDelete200Response';
import { ApiAdminTeamsTeamIdKeyGet200Response } from '../models/ApiAdminTeamsTeamIdKeyGet200Response';
import { ApiAdminTeamsTeamIdKeyGet200ResponseTeam } from '../models/ApiAdminTeamsTeamIdKeyGet200ResponseTeam';
import { ApiAdminTeamsTeamIdReactivatePost200Response } from '../models/ApiAdminTeamsTeamIdReactivatePost200Response';
import { ApiAdminTeamsTeamIdReactivatePost200ResponseTeam } from '../models/ApiAdminTeamsTeamIdReactivatePost200ResponseTeam';
import { ApiCompetitionLeaderboardGet200Response } from '../models/ApiCompetitionLeaderboardGet200Response';
import { ApiCompetitionLeaderboardGet200ResponseCompetition     , ApiCompetitionLeaderboardGet200ResponseCompetitionStatusEnum     } from '../models/ApiCompetitionLeaderboardGet200ResponseCompetition';
import { ApiCompetitionLeaderboardGet200ResponseLeaderboardInner } from '../models/ApiCompetitionLeaderboardGet200ResponseLeaderboardInner';
import { ApiCompetitionRulesGet200Response } from '../models/ApiCompetitionRulesGet200Response';
import { ApiCompetitionRulesGet200ResponseRules } from '../models/ApiCompetitionRulesGet200ResponseRules';
import { ApiCompetitionRulesGet200ResponseRulesAvailableChains } from '../models/ApiCompetitionRulesGet200ResponseRulesAvailableChains';
import { ApiCompetitionRulesGet200ResponseRulesPortfolioSnapshots } from '../models/ApiCompetitionRulesGet200ResponseRulesPortfolioSnapshots';
import { ApiCompetitionStatusGet200Response } from '../models/ApiCompetitionStatusGet200Response';
import { ApiCompetitionStatusGet200ResponseCompetition     , ApiCompetitionStatusGet200ResponseCompetitionStatusEnum     } from '../models/ApiCompetitionStatusGet200ResponseCompetition';
import { ApiCompetitionUpcomingGet200Response } from '../models/ApiCompetitionUpcomingGet200Response';
import { ApiCompetitionUpcomingGet200ResponseCompetitionsInner   , ApiCompetitionUpcomingGet200ResponseCompetitionsInnerStatusEnum      } from '../models/ApiCompetitionUpcomingGet200ResponseCompetitionsInner';
import { ApiHealthDetailedGet200Response } from '../models/ApiHealthDetailedGet200Response';
import { ApiHealthDetailedGet200ResponseServices } from '../models/ApiHealthDetailedGet200ResponseServices';
import { ApiHealthGet200Response } from '../models/ApiHealthGet200Response';
import { ApiPriceGet200Response   , ApiPriceGet200ResponseChainEnum     } from '../models/ApiPriceGet200Response';
import { ApiPriceTokenInfoGet200Response   , ApiPriceTokenInfoGet200ResponseChainEnum    } from '../models/ApiPriceTokenInfoGet200Response';
import { ApiPublicTeamsRegisterPost201Response } from '../models/ApiPublicTeamsRegisterPost201Response';
import { ApiPublicTeamsRegisterPost201ResponseTeam } from '../models/ApiPublicTeamsRegisterPost201ResponseTeam';
import { ApiPublicTeamsRegisterPostRequest } from '../models/ApiPublicTeamsRegisterPostRequest';
import { ApiTradeExecutePost200Response } from '../models/ApiTradeExecutePost200Response';
import { ApiTradeExecutePostRequest } from '../models/ApiTradeExecutePostRequest';
import { ApiTradeQuoteGet200Response } from '../models/ApiTradeQuoteGet200Response';
import { ApiTradeQuoteGet200ResponseChains } from '../models/ApiTradeQuoteGet200ResponseChains';
import { ApiTradeQuoteGet200ResponsePrices } from '../models/ApiTradeQuoteGet200ResponsePrices';
import { ModelError } from '../models/ModelError';
import { TokenBalance } from '../models/TokenBalance';
import { Trade } from '../models/Trade';

/* tslint:disable:no-unused-variable */
let primitives = [
                    "string",
                    "boolean",
                    "double",
                    "integer",
                    "long",
                    "float",
                    "number",
                    "any"
                 ];

let enumsMap: Set<string> = new Set<string>([
    "ApiAccountBalancesGet200ResponseBalancesInnerChainEnum",
    "ApiAccountPortfolioGet200ResponseSourceEnum",
    "ApiAccountPortfolioGet200ResponseTokensInnerChainEnum",
    "ApiAdminCompetitionCreatePost201ResponseCompetitionStatusEnum",
    "ApiAdminCompetitionEndPost200ResponseCompetitionStatusEnum",
    "ApiAdminCompetitionStartPost200ResponseCompetitionStatusEnum",
    "ApiAdminReportsPerformanceGet200ResponseCompetitionStatusEnum",
    "ApiCompetitionLeaderboardGet200ResponseCompetitionStatusEnum",
    "ApiCompetitionStatusGet200ResponseCompetitionStatusEnum",
    "ApiCompetitionUpcomingGet200ResponseCompetitionsInnerStatusEnum",
    "ApiPriceGet200ResponseChainEnum",
    "ApiPriceTokenInfoGet200ResponseChainEnum",
]);

let typeMap: {[index: string]: any} = {
    "ApiAccountBalancesGet200Response": ApiAccountBalancesGet200Response,
    "ApiAccountBalancesGet200ResponseBalancesInner": ApiAccountBalancesGet200ResponseBalancesInner,
    "ApiAccountPortfolioGet200Response": ApiAccountPortfolioGet200Response,
    "ApiAccountPortfolioGet200ResponseTokensInner": ApiAccountPortfolioGet200ResponseTokensInner,
    "ApiAccountProfileGet200Response": ApiAccountProfileGet200Response,
    "ApiAccountProfileGet200ResponseTeam": ApiAccountProfileGet200ResponseTeam,
    "ApiAccountProfileGet200ResponseTeamMetadata": ApiAccountProfileGet200ResponseTeamMetadata,
    "ApiAccountProfileGet200ResponseTeamMetadataRef": ApiAccountProfileGet200ResponseTeamMetadataRef,
    "ApiAccountProfileGet200ResponseTeamMetadataSocial": ApiAccountProfileGet200ResponseTeamMetadataSocial,
    "ApiAccountProfilePut200Response": ApiAccountProfilePut200Response,
    "ApiAccountProfilePut200ResponseTeam": ApiAccountProfilePut200ResponseTeam,
    "ApiAccountProfilePutRequest": ApiAccountProfilePutRequest,
    "ApiAccountProfilePutRequestMetadata": ApiAccountProfilePutRequestMetadata,
    "ApiAccountResetApiKeyPost200Response": ApiAccountResetApiKeyPost200Response,
    "ApiAccountTradesGet200Response": ApiAccountTradesGet200Response,
    "ApiAccountTradesGet200ResponseTradesInner": ApiAccountTradesGet200ResponseTradesInner,
    "ApiAdminCompetitionCompetitionIdSnapshotsGet200Response": ApiAdminCompetitionCompetitionIdSnapshotsGet200Response,
    "ApiAdminCompetitionCompetitionIdSnapshotsGet200ResponseSnapshotsInner": ApiAdminCompetitionCompetitionIdSnapshotsGet200ResponseSnapshotsInner,
    "ApiAdminCompetitionCreatePost201Response": ApiAdminCompetitionCreatePost201Response,
    "ApiAdminCompetitionCreatePost201ResponseCompetition": ApiAdminCompetitionCreatePost201ResponseCompetition,
    "ApiAdminCompetitionCreatePostRequest": ApiAdminCompetitionCreatePostRequest,
    "ApiAdminCompetitionEndPost200Response": ApiAdminCompetitionEndPost200Response,
    "ApiAdminCompetitionEndPost200ResponseCompetition": ApiAdminCompetitionEndPost200ResponseCompetition,
    "ApiAdminCompetitionEndPost200ResponseLeaderboardInner": ApiAdminCompetitionEndPost200ResponseLeaderboardInner,
    "ApiAdminCompetitionEndPostRequest": ApiAdminCompetitionEndPostRequest,
    "ApiAdminCompetitionStartPost200Response": ApiAdminCompetitionStartPost200Response,
    "ApiAdminCompetitionStartPost200ResponseCompetition": ApiAdminCompetitionStartPost200ResponseCompetition,
    "ApiAdminCompetitionStartPostRequest": ApiAdminCompetitionStartPostRequest,
    "ApiAdminReportsPerformanceGet200Response": ApiAdminReportsPerformanceGet200Response,
    "ApiAdminReportsPerformanceGet200ResponseCompetition": ApiAdminReportsPerformanceGet200ResponseCompetition,
    "ApiAdminReportsPerformanceGet200ResponseLeaderboardInner": ApiAdminReportsPerformanceGet200ResponseLeaderboardInner,
    "ApiAdminSetupPost201Response": ApiAdminSetupPost201Response,
    "ApiAdminSetupPost201ResponseAdmin": ApiAdminSetupPost201ResponseAdmin,
    "ApiAdminSetupPostRequest": ApiAdminSetupPostRequest,
    "ApiAdminTeamsGet200Response": ApiAdminTeamsGet200Response,
    "ApiAdminTeamsGet200ResponseTeamsInner": ApiAdminTeamsGet200ResponseTeamsInner,
    "ApiAdminTeamsRegisterPost201Response": ApiAdminTeamsRegisterPost201Response,
    "ApiAdminTeamsRegisterPost201ResponseTeam": ApiAdminTeamsRegisterPost201ResponseTeam,
    "ApiAdminTeamsRegisterPostRequest": ApiAdminTeamsRegisterPostRequest,
    "ApiAdminTeamsTeamIdDeactivatePost200Response": ApiAdminTeamsTeamIdDeactivatePost200Response,
    "ApiAdminTeamsTeamIdDeactivatePost200ResponseTeam": ApiAdminTeamsTeamIdDeactivatePost200ResponseTeam,
    "ApiAdminTeamsTeamIdDeactivatePostRequest": ApiAdminTeamsTeamIdDeactivatePostRequest,
    "ApiAdminTeamsTeamIdDelete200Response": ApiAdminTeamsTeamIdDelete200Response,
    "ApiAdminTeamsTeamIdKeyGet200Response": ApiAdminTeamsTeamIdKeyGet200Response,
    "ApiAdminTeamsTeamIdKeyGet200ResponseTeam": ApiAdminTeamsTeamIdKeyGet200ResponseTeam,
    "ApiAdminTeamsTeamIdReactivatePost200Response": ApiAdminTeamsTeamIdReactivatePost200Response,
    "ApiAdminTeamsTeamIdReactivatePost200ResponseTeam": ApiAdminTeamsTeamIdReactivatePost200ResponseTeam,
    "ApiCompetitionLeaderboardGet200Response": ApiCompetitionLeaderboardGet200Response,
    "ApiCompetitionLeaderboardGet200ResponseCompetition": ApiCompetitionLeaderboardGet200ResponseCompetition,
    "ApiCompetitionLeaderboardGet200ResponseLeaderboardInner": ApiCompetitionLeaderboardGet200ResponseLeaderboardInner,
    "ApiCompetitionRulesGet200Response": ApiCompetitionRulesGet200Response,
    "ApiCompetitionRulesGet200ResponseRules": ApiCompetitionRulesGet200ResponseRules,
    "ApiCompetitionRulesGet200ResponseRulesAvailableChains": ApiCompetitionRulesGet200ResponseRulesAvailableChains,
    "ApiCompetitionRulesGet200ResponseRulesPortfolioSnapshots": ApiCompetitionRulesGet200ResponseRulesPortfolioSnapshots,
    "ApiCompetitionStatusGet200Response": ApiCompetitionStatusGet200Response,
    "ApiCompetitionStatusGet200ResponseCompetition": ApiCompetitionStatusGet200ResponseCompetition,
    "ApiCompetitionUpcomingGet200Response": ApiCompetitionUpcomingGet200Response,
    "ApiCompetitionUpcomingGet200ResponseCompetitionsInner": ApiCompetitionUpcomingGet200ResponseCompetitionsInner,
    "ApiHealthDetailedGet200Response": ApiHealthDetailedGet200Response,
    "ApiHealthDetailedGet200ResponseServices": ApiHealthDetailedGet200ResponseServices,
    "ApiHealthGet200Response": ApiHealthGet200Response,
    "ApiPriceGet200Response": ApiPriceGet200Response,
    "ApiPriceTokenInfoGet200Response": ApiPriceTokenInfoGet200Response,
    "ApiPublicTeamsRegisterPost201Response": ApiPublicTeamsRegisterPost201Response,
    "ApiPublicTeamsRegisterPost201ResponseTeam": ApiPublicTeamsRegisterPost201ResponseTeam,
    "ApiPublicTeamsRegisterPostRequest": ApiPublicTeamsRegisterPostRequest,
    "ApiTradeExecutePost200Response": ApiTradeExecutePost200Response,
    "ApiTradeExecutePostRequest": ApiTradeExecutePostRequest,
    "ApiTradeQuoteGet200Response": ApiTradeQuoteGet200Response,
    "ApiTradeQuoteGet200ResponseChains": ApiTradeQuoteGet200ResponseChains,
    "ApiTradeQuoteGet200ResponsePrices": ApiTradeQuoteGet200ResponsePrices,
    "ModelError": ModelError,
    "TokenBalance": TokenBalance,
    "Trade": Trade,
}

type MimeTypeDescriptor = {
    type: string;
    subtype: string;
    subtypeTokens: string[];
};

/**
 * Every mime-type consists of a type, subtype, and optional parameters.
 * The subtype can be composite, including information about the content format.
 * For example: `application/json-patch+json`, `application/merge-patch+json`.
 *
 * This helper transforms a string mime-type into an internal representation.
 * This simplifies the implementation of predicates that in turn define common rules for parsing or stringifying
 * the payload.
 */
const parseMimeType = (mimeType: string): MimeTypeDescriptor => {
    const [type = '', subtype = ''] = mimeType.split('/');
    return {
        type,
        subtype,
        subtypeTokens: subtype.split('+'),
    };
};

type MimeTypePredicate = (mimeType: string) => boolean;

// This factory creates a predicate function that checks a string mime-type against defined rules.
const mimeTypePredicateFactory = (predicate: (descriptor: MimeTypeDescriptor) => boolean): MimeTypePredicate => (mimeType) => predicate(parseMimeType(mimeType));

// Use this factory when you need to define a simple predicate based only on type and, if applicable, subtype.
const mimeTypeSimplePredicateFactory = (type: string, subtype?: string): MimeTypePredicate => mimeTypePredicateFactory((descriptor) => {
    if (descriptor.type !== type) return false;
    if (subtype != null && descriptor.subtype !== subtype) return false;
    return true;
});

// Creating a set of named predicates that will help us determine how to handle different mime-types
const isTextLikeMimeType = mimeTypeSimplePredicateFactory('text');
const isJsonMimeType = mimeTypeSimplePredicateFactory('application', 'json');
const isJsonLikeMimeType = mimeTypePredicateFactory((descriptor) => descriptor.type === 'application' && descriptor.subtypeTokens.some((item) => item === 'json'));
const isOctetStreamMimeType = mimeTypeSimplePredicateFactory('application', 'octet-stream');
const isFormUrlencodedMimeType = mimeTypeSimplePredicateFactory('application', 'x-www-form-urlencoded');

// Defining a list of mime-types in the order of prioritization for handling.
const supportedMimeTypePredicatesWithPriority: MimeTypePredicate[] = [
    isJsonMimeType,
    isJsonLikeMimeType,
    isTextLikeMimeType,
    isOctetStreamMimeType,
    isFormUrlencodedMimeType,
];

const nullableSuffix = " | null";
const optionalSuffix = " | undefined";
const arrayPrefix = "Array<";
const arraySuffix = ">";
const mapPrefix = "{ [key: string]: ";
const mapSuffix = "; }";

export class ObjectSerializer {
    public static findCorrectType(data: any, expectedType: string) {
        if (data == undefined) {
            return expectedType;
        } else if (primitives.indexOf(expectedType.toLowerCase()) !== -1) {
            return expectedType;
        } else if (expectedType === "Date") {
            return expectedType;
        } else {
            if (enumsMap.has(expectedType)) {
                return expectedType;
            }

            if (!typeMap[expectedType]) {
                return expectedType; // w/e we don't know the type
            }

            // Check the discriminator
            let discriminatorProperty = typeMap[expectedType].discriminator;
            if (discriminatorProperty == null) {
                return expectedType; // the type does not have a discriminator. use it.
            } else {
                if (data[discriminatorProperty]) {
                    var discriminatorType = data[discriminatorProperty];
                    let mapping = typeMap[expectedType].mapping;
                    if (mapping != undefined && mapping[discriminatorType]) {
                        return mapping[discriminatorType]; // use the type given in the discriminator
                    } else if(typeMap[discriminatorType]) {
                        return discriminatorType;
                    } else {
                        return expectedType; // discriminator did not map to a type
                    }
                } else {
                    return expectedType; // discriminator was not present (or an empty string)
                }
            }
        }
    }

    public static serialize(data: any, type: string, format: string): any {
        if (data == undefined) {
            return data;
        } else if (primitives.indexOf(type.toLowerCase()) !== -1) {
            return data;
        } else if (type.endsWith(nullableSuffix)) {
            let subType: string = type.slice(0, -nullableSuffix.length); // Type | null => Type
            return ObjectSerializer.serialize(data, subType, format);
        } else if (type.endsWith(optionalSuffix)) {
            let subType: string = type.slice(0, -optionalSuffix.length); // Type | undefined => Type
            return ObjectSerializer.serialize(data, subType, format);
        } else if (type.startsWith(arrayPrefix)) {
            let subType: string = type.slice(arrayPrefix.length, -arraySuffix.length); // Array<Type> => Type
            let transformedData: any[] = [];
            for (let date of data) {
                transformedData.push(ObjectSerializer.serialize(date, subType, format));
            }
            return transformedData;
        } else if (type.startsWith(mapPrefix)) {
            let subType: string = type.slice(mapPrefix.length, -mapSuffix.length); // { [key: string]: Type; } => Type
            let transformedData: { [key: string]: any } = {};
            for (let key in data) {
                transformedData[key] = ObjectSerializer.serialize(
                    data[key],
                    subType,
                    format,
                );
            }
            return transformedData;
        } else if (type === "Date") {
            if (format == "date") {
                let month = data.getMonth()+1
                month = month < 10 ? "0" + month.toString() : month.toString()
                let day = data.getDate();
                day = day < 10 ? "0" + day.toString() : day.toString();

                return data.getFullYear() + "-" + month + "-" + day;
            } else {
                return data.toISOString();
            }
        } else {
            if (enumsMap.has(type)) {
                return data;
            }
            if (!typeMap[type]) { // in case we dont know the type
                return data;
            }

            // Get the actual type of this object
            type = this.findCorrectType(data, type);

            // get the map for the correct type.
            let attributeTypes = typeMap[type].getAttributeTypeMap();
            let instance: {[index: string]: any} = {};
            for (let attributeType of attributeTypes) {
                instance[attributeType.baseName] = ObjectSerializer.serialize(data[attributeType.name], attributeType.type, attributeType.format);
            }
            return instance;
        }
    }

    public static deserialize(data: any, type: string, format: string): any {
        // polymorphism may change the actual type.
        type = ObjectSerializer.findCorrectType(data, type);
        if (data == undefined) {
            return data;
        } else if (primitives.indexOf(type.toLowerCase()) !== -1) {
            return data;
        } else if (type.endsWith(nullableSuffix)) {
            let subType: string = type.slice(0, -nullableSuffix.length); // Type | null => Type
            return ObjectSerializer.deserialize(data, subType, format);
        } else if (type.endsWith(optionalSuffix)) {
            let subType: string = type.slice(0, -optionalSuffix.length); // Type | undefined => Type
            return ObjectSerializer.deserialize(data, subType, format);
        } else if (type.startsWith(arrayPrefix)) {
            let subType: string = type.slice(arrayPrefix.length, -arraySuffix.length); // Array<Type> => Type
            let transformedData: any[] = [];
            for (let date of data) {
                transformedData.push(ObjectSerializer.deserialize(date, subType, format));
            }
            return transformedData;
        } else if (type.startsWith(mapPrefix)) {
            let subType: string = type.slice(mapPrefix.length, -mapSuffix.length); // { [key: string]: Type; } => Type
            let transformedData: { [key: string]: any } = {};
            for (let key in data) {
                transformedData[key] = ObjectSerializer.deserialize(
                    data[key],
                    subType,
                    format,
                );
            }
            return transformedData;
        } else if (type === "Date") {
            return new Date(data);
        } else {
            if (enumsMap.has(type)) {// is Enum
                return data;
            }

            if (!typeMap[type]) { // dont know the type
                return data;
            }
            let instance = new typeMap[type]();
            let attributeTypes = typeMap[type].getAttributeTypeMap();
            for (let attributeType of attributeTypes) {
                let value = ObjectSerializer.deserialize(data[attributeType.baseName], attributeType.type, attributeType.format);
                if (value !== undefined) {
                    instance[attributeType.name] = value;
                }
            }
            return instance;
        }
    }


    /**
     * Normalize media type
     *
     * We currently do not handle any media types attributes, i.e. anything
     * after a semicolon. All content is assumed to be UTF-8 compatible.
     */
    public static normalizeMediaType(mediaType: string | undefined): string | undefined {
        if (mediaType === undefined) {
            return undefined;
        }
        return (mediaType.split(";")[0] ?? '').trim().toLowerCase();
    }

    /**
     * From a list of possible media types, choose the one we can handle best.
     *
     * The order of the given media types does not have any impact on the choice
     * made.
     */
    public static getPreferredMediaType(mediaTypes: Array<string>): string {
        /** According to OAS 3 we should default to json */
        if (mediaTypes.length === 0) {
            return "application/json";
        }

        const normalMediaTypes = mediaTypes.map(ObjectSerializer.normalizeMediaType);

        for (const predicate of supportedMimeTypePredicatesWithPriority) {
            for (const mediaType of normalMediaTypes) {
                if (mediaType != null && predicate(mediaType)) {
                    return mediaType;
                }
            }
        }

        throw new Error("None of the given media types are supported: " + mediaTypes.join(", "));
    }

    /**
     * Convert data to a string according the given media type
     */
    public static stringify(data: any, mediaType: string): string {
        if (isTextLikeMimeType(mediaType)) {
            return String(data);
        }

        if (isJsonLikeMimeType(mediaType)) {
            return JSON.stringify(data);
        }

        throw new Error("The mediaType " + mediaType + " is not supported by ObjectSerializer.stringify.");
    }

    /**
     * Parse data from a string according to the given media type
     */
    public static parse(rawData: string, mediaType: string | undefined) {
        if (mediaType === undefined) {
            throw new Error("Cannot parse content. No Content-Type defined.");
        }

        if (isTextLikeMimeType(mediaType)) {
            return rawData;
        }

        if (isJsonLikeMimeType(mediaType)) {
            return JSON.parse(rawData);
        }

        throw new Error("The mediaType " + mediaType + " is not supported by ObjectSerializer.parse.");
    }
}
